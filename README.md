# NHK2020


パッケージをビルドするのに必要なもの

navigation_stack
joy_node

自律走行

roslaunch launch/control.launch
roslaunch launch/move_base.launch
rviz
rosrun navigation navigation_node



control.launch

///////////////////////////////////////////////////////////////////////////////////////////////////////
使用パッケージ
================================================================
joy joy_node

入力
ジョイスティックのボタン入力

出力
joyトピックへjoy変数をパブリッシュ

=================================================================
control control_node

入力
joyトピック

出力
subトピックへtwist型をパブリッシュ

＊
左スティック入力　→　twist.linear.x,twist.linear.yにｘ軸、ｙ軸代入
Ｌ１ボタン　→　twist.angular.z = 1.0
Ｒ１ボタン　→　twist.angular.z = -1.0

Ｌ2ボタン　→　linear.z = 1.0
Ｒ2ボタン　→　linear.z = -1.0

左スティック押し込み　→　angular.x = 1

4ボタン　→　angular.y = 1
1ボタン　→　angular.y = -1

十字キー　→　twist.linear.x,twist.linear.yにｘ軸、ｙ軸代入
======================================================================

tf_twist tf_twist

入力
subトピック

出力
left_front,left_front,right_front,right_rearトピックにwh_msg型をパブリッシュ

＊
angular.z != 0+ linearに何らかの値が入っている時　→　回転あり →　旋回指令（angular>0:左旋回　angular<0：右旋回）＋linearのノルムで速さを制御

linear.z != 0+ linearに何らかの値が入っている時 →　ボール周り回転　→ターン指令（linear>0:右折　linear<0：左折）＋linearのノルムで速さを制御

angular =0 + linearに何らかの値が入っている時→　平行移動　→　linear.xとlinear.yからyaw軸の角度と速度を計算、平行移動指令

angular.x = 1 →　目標値０速度０の指令を送る

==============================================================

urg_node urg_node 

出力
/scanトピックにlazer_scan変数をパブリッシュ


=========================================================

tf static_transform_publisher

出力
tfツリーにbase_linkからｙ軸０．１５ｚ軸０．０３動かしたところにlazer_linkがあることを出力する



========================================================================--

odometry odometry_node

入力
subトピックのtwist変数
encトピックのfloat変数

出力
/odometryトピックにオドメトリのｔｆ
/poseトピックにtwist型で自己位置の情報（linear.x:ｘ座標,linear.y:ｙ座標,angular.z:yaw角度）

＊
エンコーダの値と指令の値を組み合わせて、自己位置の値を出力している


========================================================================
arduinoノード＊２

master_arduino

入力
/right_front,right_rear,left_front,left_rearからwh_msgの変数

出力
８つの回路のＡＶＲに目標値をI2Cで送る

--------------------------------------------------

I2C_slave
角度用のＡＶＲのプログラム

I2C_v_slave
速度用のＡＶＲのプログラム


===========================================================================


//////////////////////////////////////////////////////////////////////////////////////////////////////

move_base.comtrol

使用パッケージ
========================================

map_server map_server

出力
/mapトピックにマップ情報をパブリッシュ

マップファイルの読み込み()
=======================================
amcl amcl

入力
/scan
/tf
/map

出力
/tf

*
オドメトリから推定した/tfの値を/scanと/mapの情報を照らしあわせて/tfの値を更新している

==========================================

tf_listener tf_listener

入力
/tf

出力
/speトピックにtwist型で自己位置の情報（linear.x:ｘ座標,linear.y:ｙ座標,angular.z:yaw角度）


///////////////////////////////////////////////////////////////////////////////////////////

=====================================
navigation

入力
/speトピックから自己位置推定の値

出力
/subトピックへ速度指令

＊
===================================================


























